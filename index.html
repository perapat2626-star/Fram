<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Farm Control</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0f172a; color: white; text-align: center; padding: 20px; }
        .card { background: #1e293b; padding: 25px; border-radius: 20px; margin: 15px auto; max-width: 350px; border: 1px solid #334155; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .btn { width: 45%; padding: 15px; margin: 5px; border-radius: 12px; border: none; font-size: 16px; font-weight: bold; cursor: pointer; color: white; transition: 0.3s; }
        .on { background: #22c55e; } .on:hover { background: #16a34a; }
        .off { background: #ef4444; } .off:hover { background: #dc2626; }
        #moist { font-size: 50px; color: #22c55e; font-weight: bold; margin: 10px 0; }
    </style>
</head>
<body>
    <h2>ðŸš€ Smart Farm Real-time</h2>
    
    <div class="card">
        <p>ðŸ’§ à¸„à¸§à¸²à¸¡à¸Šà¸·à¹‰à¸™à¸”à¸´à¸™à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™</p>
        <div id="moist">--</div>
        <p style="color: #64748b; font-size: 0.8em;">à¸­à¸±à¸›à¹€à¸”à¸•à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´</p>
    </div>

    <div class="card">
        <p>ðŸ’¡ à¸£à¸°à¸šà¸šà¹„à¸Ÿà¸ªà¹ˆà¸­à¸‡à¸ªà¸§à¹ˆà¸²à¸‡</p>
        <button onclick="set('light','ON')" class="btn on">à¹€à¸›à¸´à¸”</button>
        <button onclick="set('light','OFF')" class="btn off">à¸›à¸´à¸”</button>
    </div>

    <div class="card">
        <p>ðŸ’§ à¸£à¸°à¸šà¸šà¸›à¸±à¹Šà¸¡à¸™à¹‰à¸³</p>
        <button onclick="set('pump','ON')" class="btn on">à¹€à¸›à¸´à¸”</button>
        <button onclick="set('pump','OFF')" class="btn off">à¸›à¸´à¸”</button>
    </div>

    <script>
        // à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ Firebase (à¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡à¸ˆà¸²à¸à¸£à¸¹à¸›à¸‚à¸­à¸‡à¸„à¸¸à¸“)
        const firebaseConfig = {
            databaseURL: "https://fram-1fd7e-default-rtdb.firebaseio.com"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // à¸”à¸¶à¸‡à¸„à¹ˆà¸²à¸„à¸§à¸²à¸¡à¸Šà¸·à¹‰à¸™à¸¡à¸²à¹à¸ªà¸”à¸‡à¸œà¸¥
        db.ref("status/moisture").on("value", (snapshot) => {
            const val = snapshot.val();
            document.getElementById("moist").innerText = val !== null ? val + " %" : "0 %";
        });

        // à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸ªà¸±à¹ˆà¸‡à¸‡à¸²à¸™
        function set(target, action) {
            db.ref("control/" + target).set(action)
              .then(() => console.log(target + " is " + action))
              .catch((error) => alert("Error: " + error.message));
        }
    </script>
</body>
</html>
